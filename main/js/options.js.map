{"version":3,"sources":["webpack:///options.js","webpack:///webpack/bootstrap ca5c5af5418f5d326eb4?b917","webpack:///./src/popup.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","20","$","defaultConfig","color","chrome","storage","sync","items","document","body","style","backgroundColor","html","i18n","getMessage","val","url","node","res","on","set","notifications","create","type","iconUrl","title","message","click","e","window","open","extension","getURL","ver","text"],"mappings":"CAAS,SAAUA,GCIjB,QAASC,GAAoBC,GAG5B,GAAGC,EAAiBD,GACnB,MAAOC,GAAiBD,GAAUE,OAGnC,IAAIC,GAASF,EAAiBD,IAC7BI,EAAGJ,EACHK,GAAG,EACHH,WAUD,OANAJ,GAAQE,GAAUM,KAAKH,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOE,GAAI,EAGJF,EAAOD,QAvBf,GAAID,KA4BJF,GAAoBQ,EAAIT,EAGxBC,EAAoBS,EAAIP,EAGxBF,EAAoBK,EAAI,SAASK,GAAS,MAAOA,IAGjDV,EAAoBW,EAAI,SAASR,EAASS,EAAMC,GAC3Cb,EAAoBc,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,GAC9BK,cAAc,EACdC,YAAY,EACZC,IAAKN,KAMRb,EAAoBoB,EAAI,SAAShB,GAChC,GAAIS,GAAST,GAAUA,EAAOiB,WAC7B,WAAwB,MAAOjB,GAAgB,SAC/C,WAA8B,MAAOA,GAEtC,OADAJ,GAAoBW,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRb,EAAoBc,EAAI,SAASQ,EAAQC,GAAY,MAAOR,QAAOS,UAAUC,eAAelB,KAAKe,EAAQC,IAGzGvB,EAAoB0B,EAAI,YAGjB1B,EAAoBA,EAAoB2B,EAAI,MDM/CC,GACA,SAAUxB,EAAQD,GEvExB0B,EAAE,WAGD,GAAIC,IAAiBC,MAAO,QAC5BC,QAAOC,QAAQC,KAAKf,IAAIW,EAAe,SAASK,GAC/CC,SAASC,KAAKC,MAAMC,gBAAkBJ,EAAMJ,QAI7CF,EAAE,cAAcW,KAAKR,OAAOS,KAAKC,WAAW,eAG5Cb,EAAE,aAAac,IAAI,SACnBX,OAAOC,QAAQC,KAAKf,KAAKyB,IAAK,gCAAgCC,KAAM,QAAS,SAASC,GACrFjB,EAAE,aAAac,IAAIG,EAAIF,KACvBf,EAAE,SAASc,IAAIG,EAAID,UAIrBhB,EAAE,aAAakB,GAAG,QAAS,WAC1B,GAAIH,GAAMf,EAAE,aAAac,MACrBE,EAAOhB,EAAE,SAASc,KAEtBX,QAAOC,QAAQC,KAAKc,KAAKJ,IAAKA,EAAKC,KAAMA,GAAO,WAC/Cb,OAAOiB,cAAcC,OAAO,MAC3BC,KAAM,QACNC,QAAS,eACTC,MAAO,OACPC,QAAS,aAOZzB,EAAE,oBAAoB0B,MAAM,SAASC,GACpCC,OAAOC,KAAK1B,OAAO2B,UAAUC,OAAO,sBAIrC5B,OAAOC,QAAQC,KAAKf,KAAK0C,IAAK,KAAM,SAASf,GAC5CjB,EAAE,QAAQiC,KAAKhB,EAAIe","file":"options.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/main/js/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 20);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 20:\n/***/ (function(module, exports) {\n\n$(function () {\n\n\t// 加载设置\n\tvar defaultConfig = { color: 'white' }; // 默认配置\n\tchrome.storage.sync.get(defaultConfig, function (items) {\n\t\tdocument.body.style.backgroundColor = items.color;\n\t});\n\n\t// 初始化国际化\n\t$('#test_i18n').html(chrome.i18n.getMessage(\"helloWorld\"));\n\t// alert('ddddddd');\n\n\t$('#back-url').val('55555');\n\tchrome.storage.sync.get({ url: 'http://localhost:3000/receive', node: 'body' }, function (res) {\n\t\t$('#back-url').val(res.url);\n\t\t$('#node').val(res.node);\n\t});\n});\n\n$('#save-btn').on('click', function () {\n\tvar url = $('#back-url').val();\n\tvar node = $('#node').val();\n\n\tchrome.storage.sync.set({ url: url, node: node }, function () {\n\t\tchrome.notifications.create(null, {\n\t\t\ttype: 'basic',\n\t\t\ticonUrl: 'img/icon.png',\n\t\t\ttitle: '这是标题',\n\t\t\tmessage: '保存成功'\n\t\t});\n\t});\n});\n\n// 打开后台页\n$('#open_background').click(function (e) {\n\twindow.open(chrome.extension.getURL('background.html'));\n});\n\nchrome.storage.sync.get({ ver: '1' }, function (res) {\n\t$('#ver').text(res.ver);\n\t// alert(res.ver);\n});\n/* \r\n// 调用后台JS\r\n$('#invoke_background_js').click(e => {\r\n\tvar bg = chrome.extension.getBackgroundPage();\r\n\tbg.testBackground();\r\n});\r\n\r\n// 获取后台页标题\r\n$('#get_background_title').click(e => {\r\n\tvar bg = chrome.extension.getBackgroundPage();\r\n\talert(bg.document.title);\r\n});\r\n\r\n// 设置后台页标题\r\n$('#set_background_title').click(e => {\r\n\tvar title = prompt('请输入background的新标题：', '这是新标题');\r\n\tvar bg = chrome.extension.getBackgroundPage();\r\n\tbg.document.title = title;\r\n\talert('修改成功！');\r\n});\r\n\r\n// 自定义窗体大小\r\n$('#custom_window_size').click(() => {\r\n\tchrome.windows.getCurrent({}, (currentWindow) => {\r\n\t\tvar startLeft = 10;\r\n\t\tchrome.windows.update(currentWindow.id, \r\n\t\t{\r\n\t\t\tleft: startLeft * 10,\r\n\t\t\ttop: 100,\r\n\t\t\twidth: 800,\r\n\t\t\theight: 600\r\n\t\t});\r\n\t\tvar inteval = setInterval(() => {\r\n\t\t\tif(startLeft >= 40) clearInterval(inteval);\r\n\t\t\tchrome.windows.update(currentWindow.id, {left: (++startLeft) * 10});\r\n\t\t}, 50);\r\n\t});\r\n});\r\n\r\n// 最大化窗口\r\n$('#max_current_window').click(() => {\r\n\tchrome.windows.getCurrent({}, (currentWindow) => {\r\n\t\t// state: 可选 'minimized', 'maximized' and 'fullscreen' \r\n\t\tchrome.windows.update(currentWindow.id, {state: 'maximized'});\r\n\t});\r\n});\r\n\r\n\r\n// 最小化窗口\r\n$('#min_current_window').click(() => {\r\n\tchrome.windows.getCurrent({}, (currentWindow) => {\r\n\t\t// state: 可选 'minimized', 'maximized' and 'fullscreen' \r\n\t\tchrome.windows.update(currentWindow.id, {state: 'minimized'});\r\n\t});\r\n});\r\n\r\n// 打开新窗口\r\n$('#open_new_window').click(() => {\r\n\tchrome.windows.create({state: 'maximized'});\r\n});\r\n\r\n// 关闭全部\r\n$('#close_current_window').click(() => {\r\n\tchrome.windows.getCurrent({}, (currentWindow) => {\r\n\t\tchrome.windows.remove(currentWindow.id);\r\n\t});\r\n});\r\n\r\n// 新标签打开网页\r\n$('#open_url_new_tab').click(() => {\r\n\tchrome.tabs.create({url: 'https://www.baidu.com'});\r\n});\r\n\r\n// 当前标签打开网页\r\n$('#open_url_current_tab').click(() => {\r\n\tgetCurrentTabId(tabId => {\r\n\t\tchrome.tabs.update(tabId, {url: 'http://www.so.com'});\r\n\t});\r\n});\r\n\r\n// 获取当前标签ID\r\n$('#get_current_tab_id').click(() => {\r\n\tgetCurrentTabId(tabId => {\r\n\t\talert('当前标签ID：' + tabId);\r\n\t});\r\n});\r\n\r\n// 高亮tab\r\n$('#highlight_tab').click(() => {\r\n\tchrome.tabs.highlight({tabs: 0});\r\n});\r\n\r\n// popup主动发消息给content-script\r\n$('#send_message_to_content_script').click(() => {\r\n\tsendMessageToContentScript('你好，我是popup！', (response) => {\r\n\t\tif(response) alert('收到来自content-script的回复：'+response);\r\n\t});\r\n});\r\n\r\n// 监听来自content-script的消息\r\nchrome.runtime.onMessage.addListener(function(request, sender, sendResponse)\r\n{\r\n\tconsole.log('收到来自content-script的消息：');\r\n\tconsole.log(request, sender, sendResponse);\r\n\tsendResponse('我是popup，我已收到你的消息：' + JSON.stringify(request));\r\n});\r\n\r\n// popup与content-script建立长连接\r\n$('#connect_to_content_script').click(() => {\r\n\tgetCurrentTabId((tabId) => {\r\n\t\tvar port = chrome.tabs.connect(tabId, {name: 'test-connect'});\r\n\t\tport.postMessage({question: '你是谁啊？'});\r\n\t\tport.onMessage.addListener(function(msg) {\r\n\t\t\talert('收到长连接消息：'+msg.answer);\r\n\t\t\tif(msg.answer && msg.answer.startsWith('我是'))\r\n\t\t\t{\r\n\t\t\t\tport.postMessage({question: '哦，原来是你啊！'});\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n});\r\n\r\n// 获取当前选项卡ID\r\nfunction getCurrentTabId(callback)\r\n{\r\n\tchrome.tabs.query({active: true, currentWindow: true}, function(tabs)\r\n\t{\r\n\t\tif(callback) callback(tabs.length ? tabs[0].id: null);\r\n\t});\r\n}\r\n\r\n// 这2个获取当前选项卡id的方法大部分时候效果都一致，只有少部分时候会不一样\r\nfunction getCurrentTabId2()\r\n{\r\n\tchrome.windows.getCurrent(function(currentWindow)\r\n\t{\r\n\t\tchrome.tabs.query({active: true, windowId: currentWindow.id}, function(tabs)\r\n\t\t{\r\n\t\t\tif(callback) callback(tabs.length ? tabs[0].id: null);\r\n\t\t});\r\n\t});\r\n}\r\n\r\n// 向content-script主动发送消息\r\nfunction sendMessageToContentScript(message, callback)\r\n{\r\n\tgetCurrentTabId((tabId) =>\r\n\t{\r\n\t\tchrome.tabs.sendMessage(tabId, message, function(response)\r\n\t\t{\r\n\t\t\tif(callback) callback(response);\r\n\t\t});\r\n\t});\r\n}\r\n\r\n// 向content-script注入JS片段\r\nfunction executeScriptToCurrentTab(code)\r\n{\r\n\tgetCurrentTabId((tabId) =>\r\n\t{\r\n\t\tchrome.tabs.executeScript(tabId, {code: code});\r\n\t});\r\n}\r\n\r\n\r\n// 演示2种方式操作DOM\r\n\r\n// 修改背景色\r\n$('#update_bg_color').click(() => {\r\n\texecuteScriptToCurrentTab('document.body.style.backgroundColor=\"red\";')\r\n});\r\n\r\n// 修改字体大小\r\n$('#update_font_size').click(() => {\r\n\tsendMessageToContentScript({cmd:'update_font_size', size: 42}, function(response){});\r\n});\r\n\r\n// 显示badge\r\n$('#show_badge').click(() => {\r\n\tchrome.browserAction.setBadgeText({text: 'New'});\r\n\tchrome.browserAction.setBadgeBackgroundColor({color: [255, 0, 0, 255]});\r\n});\r\n\r\n// 隐藏badge\r\n$('#hide_badge').click(() => {\r\n\tchrome.browserAction.setBadgeText({text: ''});\r\n\tchrome.browserAction.setBadgeBackgroundColor({color: [0, 0, 0, 0]});\r\n});\r\n\r\n// 显示桌面通知\r\n$('#show_notification').click(e => {\r\n\tchrome.notifications.create(null, {\r\n\t\ttype: 'image',\r\n\t\ticonUrl: 'img/icon.png',\r\n\t\ttitle: '祝福',\r\n\t\tmessage: '骚年，祝你圣诞快乐！Merry christmas!',\r\n\t\timageUrl: 'img/sds.png'\r\n\t});\r\n});\r\n\r\n$('#check_media').click(e => {\r\n\talert('即将打开一个有视频的网站，届时将自动检测是否存在视频！');\r\n\tchrome.tabs.create({url: 'http://www.w3school.com.cn/tiy/t.asp?f=html5_video'});\r\n}); */\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// options.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/main/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ca5c5af5418f5d326eb4","$(function() {\r\n\r\n\t// 加载设置\r\n\tvar defaultConfig = {color: 'white'}; // 默认配置\r\n\tchrome.storage.sync.get(defaultConfig, function(items) {\r\n\t\tdocument.body.style.backgroundColor = items.color;\r\n\t});\r\n\r\n\t// 初始化国际化\r\n\t$('#test_i18n').html(chrome.i18n.getMessage(\"helloWorld\"));\r\n\t// alert('ddddddd');\r\n\r\n\t$('#back-url').val('55555');\r\n\tchrome.storage.sync.get({url: 'http://localhost:3000/receive',node: 'body'}, function(res){\r\n\t\t$('#back-url').val(res.url);\r\n\t\t$('#node').val(res.node);\r\n\t});\r\n})\r\n\r\n$('#save-btn').on('click', function() {\r\n\tvar url = $('#back-url').val();\r\n\tvar node = $('#node').val();\r\n\t\r\n\tchrome.storage.sync.set({url: url, node: node}, function(){\r\n\t\tchrome.notifications.create(null, {\r\n\t\t\ttype: 'basic',\r\n\t\t\ticonUrl: 'img/icon.png',\r\n\t\t\ttitle: '这是标题',\r\n\t\t\tmessage: '保存成功'\r\n\t\t});\r\n\t});\r\n})\r\n\r\n\r\n// 打开后台页\r\n$('#open_background').click(function(e){\r\n\twindow.open(chrome.extension.getURL('background.html'));\r\n});\r\n\r\n\r\nchrome.storage.sync.get({ver: '1'}, function(res) {\r\n\t$('#ver').text(res.ver);\r\n\t// alert(res.ver);\r\n});\r\n/* \r\n// 调用后台JS\r\n$('#invoke_background_js').click(e => {\r\n\tvar bg = chrome.extension.getBackgroundPage();\r\n\tbg.testBackground();\r\n});\r\n\r\n// 获取后台页标题\r\n$('#get_background_title').click(e => {\r\n\tvar bg = chrome.extension.getBackgroundPage();\r\n\talert(bg.document.title);\r\n});\r\n\r\n// 设置后台页标题\r\n$('#set_background_title').click(e => {\r\n\tvar title = prompt('请输入background的新标题：', '这是新标题');\r\n\tvar bg = chrome.extension.getBackgroundPage();\r\n\tbg.document.title = title;\r\n\talert('修改成功！');\r\n});\r\n\r\n// 自定义窗体大小\r\n$('#custom_window_size').click(() => {\r\n\tchrome.windows.getCurrent({}, (currentWindow) => {\r\n\t\tvar startLeft = 10;\r\n\t\tchrome.windows.update(currentWindow.id, \r\n\t\t{\r\n\t\t\tleft: startLeft * 10,\r\n\t\t\ttop: 100,\r\n\t\t\twidth: 800,\r\n\t\t\theight: 600\r\n\t\t});\r\n\t\tvar inteval = setInterval(() => {\r\n\t\t\tif(startLeft >= 40) clearInterval(inteval);\r\n\t\t\tchrome.windows.update(currentWindow.id, {left: (++startLeft) * 10});\r\n\t\t}, 50);\r\n\t});\r\n});\r\n\r\n// 最大化窗口\r\n$('#max_current_window').click(() => {\r\n\tchrome.windows.getCurrent({}, (currentWindow) => {\r\n\t\t// state: 可选 'minimized', 'maximized' and 'fullscreen' \r\n\t\tchrome.windows.update(currentWindow.id, {state: 'maximized'});\r\n\t});\r\n});\r\n\r\n\r\n// 最小化窗口\r\n$('#min_current_window').click(() => {\r\n\tchrome.windows.getCurrent({}, (currentWindow) => {\r\n\t\t// state: 可选 'minimized', 'maximized' and 'fullscreen' \r\n\t\tchrome.windows.update(currentWindow.id, {state: 'minimized'});\r\n\t});\r\n});\r\n\r\n// 打开新窗口\r\n$('#open_new_window').click(() => {\r\n\tchrome.windows.create({state: 'maximized'});\r\n});\r\n\r\n// 关闭全部\r\n$('#close_current_window').click(() => {\r\n\tchrome.windows.getCurrent({}, (currentWindow) => {\r\n\t\tchrome.windows.remove(currentWindow.id);\r\n\t});\r\n});\r\n\r\n// 新标签打开网页\r\n$('#open_url_new_tab').click(() => {\r\n\tchrome.tabs.create({url: 'https://www.baidu.com'});\r\n});\r\n\r\n// 当前标签打开网页\r\n$('#open_url_current_tab').click(() => {\r\n\tgetCurrentTabId(tabId => {\r\n\t\tchrome.tabs.update(tabId, {url: 'http://www.so.com'});\r\n\t});\r\n});\r\n\r\n// 获取当前标签ID\r\n$('#get_current_tab_id').click(() => {\r\n\tgetCurrentTabId(tabId => {\r\n\t\talert('当前标签ID：' + tabId);\r\n\t});\r\n});\r\n\r\n// 高亮tab\r\n$('#highlight_tab').click(() => {\r\n\tchrome.tabs.highlight({tabs: 0});\r\n});\r\n\r\n// popup主动发消息给content-script\r\n$('#send_message_to_content_script').click(() => {\r\n\tsendMessageToContentScript('你好，我是popup！', (response) => {\r\n\t\tif(response) alert('收到来自content-script的回复：'+response);\r\n\t});\r\n});\r\n\r\n// 监听来自content-script的消息\r\nchrome.runtime.onMessage.addListener(function(request, sender, sendResponse)\r\n{\r\n\tconsole.log('收到来自content-script的消息：');\r\n\tconsole.log(request, sender, sendResponse);\r\n\tsendResponse('我是popup，我已收到你的消息：' + JSON.stringify(request));\r\n});\r\n\r\n// popup与content-script建立长连接\r\n$('#connect_to_content_script').click(() => {\r\n\tgetCurrentTabId((tabId) => {\r\n\t\tvar port = chrome.tabs.connect(tabId, {name: 'test-connect'});\r\n\t\tport.postMessage({question: '你是谁啊？'});\r\n\t\tport.onMessage.addListener(function(msg) {\r\n\t\t\talert('收到长连接消息：'+msg.answer);\r\n\t\t\tif(msg.answer && msg.answer.startsWith('我是'))\r\n\t\t\t{\r\n\t\t\t\tport.postMessage({question: '哦，原来是你啊！'});\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n});\r\n\r\n// 获取当前选项卡ID\r\nfunction getCurrentTabId(callback)\r\n{\r\n\tchrome.tabs.query({active: true, currentWindow: true}, function(tabs)\r\n\t{\r\n\t\tif(callback) callback(tabs.length ? tabs[0].id: null);\r\n\t});\r\n}\r\n\r\n// 这2个获取当前选项卡id的方法大部分时候效果都一致，只有少部分时候会不一样\r\nfunction getCurrentTabId2()\r\n{\r\n\tchrome.windows.getCurrent(function(currentWindow)\r\n\t{\r\n\t\tchrome.tabs.query({active: true, windowId: currentWindow.id}, function(tabs)\r\n\t\t{\r\n\t\t\tif(callback) callback(tabs.length ? tabs[0].id: null);\r\n\t\t});\r\n\t});\r\n}\r\n\r\n// 向content-script主动发送消息\r\nfunction sendMessageToContentScript(message, callback)\r\n{\r\n\tgetCurrentTabId((tabId) =>\r\n\t{\r\n\t\tchrome.tabs.sendMessage(tabId, message, function(response)\r\n\t\t{\r\n\t\t\tif(callback) callback(response);\r\n\t\t});\r\n\t});\r\n}\r\n\r\n// 向content-script注入JS片段\r\nfunction executeScriptToCurrentTab(code)\r\n{\r\n\tgetCurrentTabId((tabId) =>\r\n\t{\r\n\t\tchrome.tabs.executeScript(tabId, {code: code});\r\n\t});\r\n}\r\n\r\n\r\n// 演示2种方式操作DOM\r\n\r\n// 修改背景色\r\n$('#update_bg_color').click(() => {\r\n\texecuteScriptToCurrentTab('document.body.style.backgroundColor=\"red\";')\r\n});\r\n\r\n// 修改字体大小\r\n$('#update_font_size').click(() => {\r\n\tsendMessageToContentScript({cmd:'update_font_size', size: 42}, function(response){});\r\n});\r\n\r\n// 显示badge\r\n$('#show_badge').click(() => {\r\n\tchrome.browserAction.setBadgeText({text: 'New'});\r\n\tchrome.browserAction.setBadgeBackgroundColor({color: [255, 0, 0, 255]});\r\n});\r\n\r\n// 隐藏badge\r\n$('#hide_badge').click(() => {\r\n\tchrome.browserAction.setBadgeText({text: ''});\r\n\tchrome.browserAction.setBadgeBackgroundColor({color: [0, 0, 0, 0]});\r\n});\r\n\r\n// 显示桌面通知\r\n$('#show_notification').click(e => {\r\n\tchrome.notifications.create(null, {\r\n\t\ttype: 'image',\r\n\t\ticonUrl: 'img/icon.png',\r\n\t\ttitle: '祝福',\r\n\t\tmessage: '骚年，祝你圣诞快乐！Merry christmas!',\r\n\t\timageUrl: 'img/sds.png'\r\n\t});\r\n});\r\n\r\n$('#check_media').click(e => {\r\n\talert('即将打开一个有视频的网站，届时将自动检测是否存在视频！');\r\n\tchrome.tabs.create({url: 'http://www.w3school.com.cn/tiy/t.asp?f=html5_video'});\r\n}); */\n\n\n// WEBPACK FOOTER //\n// ./src/popup.js"],"sourceRoot":""}