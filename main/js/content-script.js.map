{"version":3,"sources":["webpack:///content-script.js","webpack:///webpack/bootstrap 50d6af9594193940f3d0?1f0a***","webpack:///./src/content-script.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","4","injectCustomJs","jsPath","additional","temp","document","createElement","setAttribute","src","chrome","extension","getURL","body","appendChild","onload","this","parentNode","removeChild","sendMessageToBackground","message","runtime","sendMessage","cmd","greeting","response","tip","initCustomEventListen","hiddenDiv","getElementById","style","display","id","addEventListener","innerText","info","ele","className","top","tipCount","innerHTML","classList","add","setTimeout","remove","onMessage","addListener","request","sender","sendResponse","size","head","cookie","content","$","node","html","JSON","stringify","date","Date","now","href","location","getElementsByTagName","fetchDescURL","URL","createObjectURL","Blob","type","result","codeURL","replace","url","desc","msg","res","uuid","console","log","onConnect","port","question","postMessage","answer","window","e","data","eval","code","params","timeout","blob","responseType","fileName"],"mappings":"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","file":"content-script.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/main/js/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 4:\n/***/ (function(module, exports) {\n\n// console.log('这是content script!');\n// 注意，必须设置了run_at=document_start 此段代码才会生效\ndocument.addEventListener('DOMContentLoaded', function () {\n\t// var hostNames = ['item.taobao.com', 'detail.tmall.com', 'detail.1688.com']\n\t// 注入自定义JS\n\tinjectCustomJs();\n});\n\n/* function initCustomPanel()\n{\n\tvar panel = document.createElement('div');\n\tpanel.className = 'chrome-plugin-demo-panel';\n\tpanel.innerHTML = '\\\n\t\t<h2>injected-script操作content-script演示区：</h2>\\\n\t\t<div class=\"btn-area\">\\\n\t\t\t<a href=\"javascript:sendMessageToContentScriptByPostMessage(\\'你好，我是普通页面！\\')\">通过postMessage发送消息给content-script</a><br>\\\n\t\t\t<a href=\"javascript:sendMessageToContentScriptByEvent(\\'你好啊！我是通过DOM事件发送的消息！\\')\">通过DOM事件发送消息给content-script</a><br>\\\n\t\t\t<a href=\"javascript:invokeContentScript(\\'sendMessageToBackground()\\')\">发送消息到后台或者popup</a><br>\\\n\t\t</div>\\\n\t\t<div id=\"my_custom_log\">\\\n\t\t</div>\\\n\t';\n\tdocument.body.appendChild(panel);\n}*/\n\n// 向页面注入JS\nfunction injectCustomJs(jsPath, additional) {\n\tjsPath = jsPath || 'js/inject.js';\n\tvar temp = document.createElement('script');\n\ttemp.setAttribute('type', 'text/javascript');\n\t// 获得的地址类似：chrome-extension://ihcokhadfjfchaeagdoclpnjdiokfakg/js/inject.js\n\tif (!additional) {\n\t\ttemp.src = chrome.extension.getURL(jsPath);\n\t\t// console.log(chrome.extension.getURL(jsPath));\n\t} else {\n\t\ttemp.src = jsPath;\n\t}\n\tdocument.body.appendChild(temp);\n\ttemp.onload = function () {\n\t\t// 执行完后移除掉\n\t\tthis.parentNode.removeChild(this);\n\t};\n}\n\n// 接收来自后台的消息\nchrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {\n\t// console.log('收到来自 ' + (sender.tab ? \"content-script(\" + sender.tab.url + \")\" : \"popup或者background\") + ' 的消息：', request);\n\tif (request.cmd == 'update_font_size') {\n\t\tvar ele = document.createElement('style');\n\t\tele.innerHTML = '* {font-size: ' + request.size + 'px !important;}';\n\t\tdocument.head.appendChild(ele);\n\t} else if (request.cmd == 'getContent') {\n\t\tvar cookie = document.cookie;\n\t\tvar content = $(request.node || 'body').html();\n\t\tvar response = JSON.stringify({\n\t\t\tcookie: cookie,\n\t\t\tcontent: content,\n\t\t\tdate: Date.now(),\n\t\t\thref: location.href\n\t\t});\n\t\tsendResponse(response);\n\t} else if (request.cmd == 'fetchHtmlAndDesc') {\n\t\t// \n\t\tvar content = document.getElementsByTagName('html')[0].innerHTML;\n\t\t// console.log(location.href);\n\t\t// console.log('content', content);\n\t\tsendResponse(content);\n\t\tvar fetchDescURL = URL.createObjectURL(new Blob(['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveTaskFetchHtmlAndDesc&&window.wonbaoInjectedObj.receiveTaskFetchHtmlAndDesc()']), {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t\tinjectCustomJs(fetchDescURL, true);\n\t} else if (request.cmd == 'notifyIframeUsefull') {\n\t\t// 向 page 通知 iframe有内容\n\t\tvar result = {\n\t\t\thref: request.href\n\t\t\t// alert(request.content);\n\t\t};var codeURL = URL.createObjectURL(new Blob(['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveNotifyIframeUsefull && window.wonbaoInjectedObj.receiveNotifyIframeUsefull(' + JSON.stringify(result) + ')']), {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t\tinjectCustomJs(codeURL, true);\n\t} else if (request.cmd == 'reveiverIframeHtml') {\n\t\t// 向 page 通知 iframe 的html内容\n\t\tvar result = {\n\t\t\thref: request.href,\n\t\t\tcontent: (request.content || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt'),\n\t\t\thtml: (request.html || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt')\n\t\t\t// alert(request.content);\n\t\t};var codeURL = URL.createObjectURL(new Blob(['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveTaskResult&&window.wonbaoInjectedObj.receiveTaskResult(' + JSON.stringify(result) + ')']), {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t\tinjectCustomJs(codeURL, true);\n\t\t// tip(JSON.stringify(request));\n\t\t// sendResponse('我收到你的消息了：'+JSON.stringify(request));\n\t} else if (request.cmd == 'receiveNewQueue') {\n\t\t// 向 page 通知接收到 复制请链接等内容\n\t\t// console.log('request', request);\n\n\t\tvar url = request.url;\n\t\tvar html = request.html;\n\t\tvar desc = request.desc;\n\t\tvar msg = request.msg;\n\n\t\tvar result = {\n\t\t\turl: url,\n\t\t\thtml: (html || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt'),\n\t\t\tdesc: (desc || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt'),\n\t\t\tmsg: msg\n\t\t};\n\t\tvar codeURL = URL.createObjectURL(new Blob(['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveInjectNewQueue&&window.wonbaoInjectedObj.receiveInjectNewQueue(' + JSON.stringify(result) + ')']), {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t\tinjectCustomJs(codeURL, true);\n\t} else if (request.cmd == 'reveiveFetchData') {\n\t\t// 向 page 通知接收到的跨域请求到的数据\n\t\tvar result = {\n\t\t\turl: request.url,\n\t\t\tres: (request.res || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt'),\n\t\t\tuuid: request.uuid\n\t\t\t// console.log('result', result);\n\t\t};var codeURL = URL.createObjectURL(new Blob(['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveFetchDataTaskResult&&window.wonbaoInjectedObj.receiveFetchDataTaskResult(' + JSON.stringify(result) + ')']), {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t\tinjectCustomJs(codeURL, true);\n\t} else if (request.cmd == 'receiveHttpRequest') {\n\t\t// 向 page通知接收到时 数握\n\t\tvar result = {\n\t\t\turl: request.url,\n\t\t\tuuid: request.uuid,\n\t\t\tres: request.res //(request.res || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' ),\n\t\t};\n\t\tconsole.log('result', result);\n\t\tvar codeURL = URL.createObjectURL(new Blob(['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveHttpRequestTaskResult&&window.wonbaoInjectedObj.receiveHttpRequestTaskResult(' + JSON.stringify(result) + ')']), {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t\tinjectCustomJs(codeURL, true);\n\t}\n});\n\n// 主动发送消息给后台\n// 要演示此功能，请打开控制台主动执行sendMessageToBackground()\nfunction sendMessageToBackground(message) {\n\tchrome.runtime.sendMessage({ cmd: 'default', greeting: message || '你好，我是content-script呀，我主动发消息给后台！' }, function (response) {\n\t\ttip('收到来自后台的回复：' + response);\n\t});\n}\n\n// 监听长连接\nchrome.runtime.onConnect.addListener(function (port) {\n\t// console.log(port);\n\tif (port.name == 'test-connect') {\n\t\tport.onMessage.addListener(function (msg) {\n\t\t\t//console.log('收到长连接消息：', msg);\n\t\t\ttip('收到长连接消息：' + JSON.stringify(msg));\n\t\t\tif (msg.question == '你是谁啊？') port.postMessage({ answer: '我是你爸！' });\n\t\t});\n\t}\n});\n\nwindow.addEventListener(\"message\", function (e) {\n\t// console.log('收到消息：', e.data);\n\tif (e.data && e.data.cmd == 'invoke') {\n\t\teval('(' + e.data.code + ')');\n\t} else if (e.data && e.data.cmd == 'message') {\n\t\ttip(e.data.data);\n\t} else if (e.data.cmd == 'notifyIframeHtmlUsefull') {\n\t\tchrome.runtime.sendMessage({ cmd: 'notifyIframeHtmlUsefull', href: e.data.href }, function (response) {});\n\t}\n\t// 收到复制的html信息\n\telse if (e.data.cmd == 'notifyIframeCopyResult') {\n\t\t\tchrome.runtime.sendMessage({ cmd: 'notifyIframeCopyResult', content: e.data.content, href: e.data.href, html: e.data.html }, function (response) {});\n\t\t} else if (e.data.cmd == 'openTab') {\n\t\t\tchrome.runtime.sendMessage({ cmd: 'openTab', params: e.data.params }, function (response) {});\n\t\t} else if (e.data.cmd == 'notify') {\n\t\t\tchrome.runtime.sendMessage({ cmd: 'notify', params: e.data.params }, function (response) {});\n\t\t} else if (e.data.cmd == 'fetchData') {\n\t\t\tchrome.runtime.sendMessage({ cmd: 'fetchData', url: e.data.url, timeout: e.data.timeout, uuid: e.data.uuid, blob: e.data.blob }, function (response) {\n\t\t\t\t// console.log('fetchHttpContent', response);\n\t\t\t\t// alert('fetchHttpContent');\n\t\t\t\t// var result = response.replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' );\n\n\t\t\t\t// alert(request.content);\n\n\n\t\t\t\t/* var codeURL = URL.createObjectURL(new Blob(\n    \t['window.receiveFetchTataTaskResult&&window.receiveFetchTataTaskResult('+response+')']\n    \t),{\n    \t\ttype: 'application/javascript'\n    \t}\n    )\n    injectCustomJs(codeURL, true);  */\n\t\t\t\t// console.log('fetchHttpContent', response);\n\t\t\t});\n\t\t} else if (e.data.cmd == 'notifyReceiveTaskFetchHtmlAndDesc') {\n\t\t\tvar html = e.data.html;\n\t\t\tvar desc = e.data.desc;\n\t\t\tvar msg = e.data.msg;\n\t\t\t// console.warn(location.href);\n\t\t\t// console.log('desc', desc);\n\t\t\tchrome.runtime.sendMessage({\n\t\t\t\tcmd: 'notifyReceiveTaskFetchHtmlAndDesc',\n\t\t\t\thtml: html,\n\t\t\t\tdesc: desc,\n\t\t\t\turl: location.href,\n\t\t\t\tmsg: msg\n\t\t\t}, function (response) {});\n\t\t} else if (e.data.cmd == 'httpRequest') {\n\t\t\tconsole.log([e.data.url, e.data.uuid, e.data.responseType]);\n\t\t\tchrome.runtime.sendMessage({ cmd: 'httpRequest', url: e.data.url, uuid: e.data.uuid, responseType: e.data.responseType }, function (response) {});\n\t\t} else if (e.data.cmd == 'sendDownload') {\n\t\t\tconsole.log([e.data.url, e.data.fileName]);\n\t\t\tchrome.runtime.sendMessage({ cmd: 'sendDownload', url: e.data.url, fileName: e.data.fileName }, function (response) {});\n\t\t}\n}, false);\n\nfunction initCustomEventListen() {\n\tvar hiddenDiv = document.getElementById('myCustomEventDiv');\n\tif (!hiddenDiv) {\n\t\thiddenDiv = document.createElement('div');\n\t\thiddenDiv.style.display = 'none';\n\t\thiddenDiv.id = 'myCustomEventDiv';\n\t\tdocument.body.appendChild(hiddenDiv);\n\t}\n\thiddenDiv.addEventListener('myCustomEvent', function () {\n\t\tvar eventData = document.getElementById('myCustomEventDiv').innerText;\n\t\ttip('收到自定义事件：' + eventData);\n\t});\n}\n\nvar tipCount = 0;\n// 简单的消息通知\nfunction tip(info) {\n\tinfo = info || '';\n\tvar ele = document.createElement('div');\n\tele.className = 'chrome-plugin-simple-tip slideInLeft';\n\tele.style.top = tipCount * 70 + 20 + 'px';\n\tele.innerHTML = '<div>' + info + '</div>';\n\tdocument.body.appendChild(ele);\n\tele.classList.add('animated');\n\ttipCount++;\n\tsetTimeout(function () {\n\t\tele.style.top = '-100px';\n\t\tsetTimeout(function () {\n\t\t\tele.remove();\n\t\t\ttipCount--;\n\t\t}, 400);\n\t}, 3000);\n}\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// content-script.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/main/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 50d6af9594193940f3d0","// console.log('这是content script!');\n// 注意，必须设置了run_at=document_start 此段代码才会生效\ndocument.addEventListener('DOMContentLoaded', function()\n{\t\n\t// var hostNames = ['item.taobao.com', 'detail.tmall.com', 'detail.1688.com']\n\t// 注入自定义JS\n\tinjectCustomJs();\n});\n\n/* function initCustomPanel()\n{\n\tvar panel = document.createElement('div');\n\tpanel.className = 'chrome-plugin-demo-panel';\n\tpanel.innerHTML = '\\\n\t\t<h2>injected-script操作content-script演示区：</h2>\\\n\t\t<div class=\"btn-area\">\\\n\t\t\t<a href=\"javascript:sendMessageToContentScriptByPostMessage(\\'你好，我是普通页面！\\')\">通过postMessage发送消息给content-script</a><br>\\\n\t\t\t<a href=\"javascript:sendMessageToContentScriptByEvent(\\'你好啊！我是通过DOM事件发送的消息！\\')\">通过DOM事件发送消息给content-script</a><br>\\\n\t\t\t<a href=\"javascript:invokeContentScript(\\'sendMessageToBackground()\\')\">发送消息到后台或者popup</a><br>\\\n\t\t</div>\\\n\t\t<div id=\"my_custom_log\">\\\n\t\t</div>\\\n\t';\n\tdocument.body.appendChild(panel);\n}*/\n\n// 向页面注入JS\nfunction injectCustomJs(jsPath, additional)\n{\n\tjsPath = jsPath || 'js/inject.js';\n\tvar temp = document.createElement('script');\n\ttemp.setAttribute('type', 'text/javascript');\n\t// 获得的地址类似：chrome-extension://ihcokhadfjfchaeagdoclpnjdiokfakg/js/inject.js\n\tif(!additional) {\n\t\ttemp.src = chrome.extension.getURL(jsPath);\n\t\t// console.log(chrome.extension.getURL(jsPath));\n\t} else {\n\t\ttemp.src = jsPath;\n\t}\n\tdocument.body.appendChild(temp);\n\ttemp.onload = function()\n\t{\n\t\t// 执行完后移除掉\n\t\tthis.parentNode.removeChild(this);\n\t};\n}\n\n// 接收来自后台的消息\nchrome.runtime.onMessage.addListener(function(request, sender, sendResponse)\n{\n\t// console.log('收到来自 ' + (sender.tab ? \"content-script(\" + sender.tab.url + \")\" : \"popup或者background\") + ' 的消息：', request);\n\tif(request.cmd == 'update_font_size') {\n\t\tvar ele = document.createElement('style');\n\t\tele.innerHTML = ('* {font-size: '+request.size+'px !important;}');\n\t\tdocument.head.appendChild(ele);\n\t}\n\telse if(request.cmd == 'getContent') {\n\t\tvar cookie = document.cookie;\n\t\tvar content = $(request.node || 'body').html();\n\t\tvar response = JSON.stringify(\n\t\t\t{\n\t\t\t\tcookie: cookie,\n\t\t\t\tcontent: content,\n\t\t\t\tdate: Date.now(),\n\t\t\t\thref: location.href,\n\t\t\t}\n\t\t) \n\t\tsendResponse(response);\n\t} else if(request.cmd == 'fetchHtmlAndDesc') { // \n\t\tvar content = document.getElementsByTagName('html')[0].innerHTML;\n\t\t// console.log(location.href);\n\t\t// console.log('content', content);\n\t\tsendResponse(content);\n\t\tvar fetchDescURL = URL.createObjectURL(new Blob(\n\t\t\t['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveTaskFetchHtmlAndDesc&&window.wonbaoInjectedObj.receiveTaskFetchHtmlAndDesc()']\n\t\t\t),{\n\t\t\t\ttype: 'application/javascript'\n\t\t\t}\n\t\t)\n\t\tinjectCustomJs(fetchDescURL, true);\n\n\t}\n\telse if(request.cmd == 'notifyIframeUsefull') { // 向 page 通知 iframe有内容\n\t\tvar result = {\n\t\t\thref: request.href,\n\t\t}\n\t\t// alert(request.content);\n\t\tvar codeURL = URL.createObjectURL(new Blob(\n\t\t\t['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveNotifyIframeUsefull && window.wonbaoInjectedObj.receiveNotifyIframeUsefull('+JSON.stringify(result)+')']\n\t\t\t),{\n\t\t\t\ttype: 'application/javascript'\n\t\t\t}\n\t\t)\n\t\tinjectCustomJs(codeURL, true);\n\t}\n\telse if(request.cmd == 'reveiverIframeHtml') { // 向 page 通知 iframe 的html内容\n\t\tvar result = {\n\t\t\thref: request.href,\n\t\t\tcontent: (request.content || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' ),\n\t\t\thtml: (request.html ||'').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' ),\n\t\t}\n\t\t// alert(request.content);\n\t\tvar codeURL = URL.createObjectURL(new Blob(\n\t\t\t['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveTaskResult&&window.wonbaoInjectedObj.receiveTaskResult('+JSON.stringify(result)+')']\n\t\t\t),{\n\t\t\t\ttype: 'application/javascript'\n\t\t\t}\n\t\t)\n\t\tinjectCustomJs(codeURL, true);\n\t\t// tip(JSON.stringify(request));\n\t\t// sendResponse('我收到你的消息了：'+JSON.stringify(request));\n\t} else if(request.cmd == 'receiveNewQueue') { // 向 page 通知接收到 复制请链接等内容\n\t\t// console.log('request', request);\n\n\t\tvar url = request.url;\n\t\tvar html = request.html;\n\t\tvar desc = request.desc;\n\t\tvar msg = request.msg;\n\n\t\tvar result = {\n\t\t\turl: url,\n\t\t\thtml: (html || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' ),\n\t\t\tdesc: (desc || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' ),\n\t\t\tmsg: msg,\n\t\t}\n\t\tvar codeURL = URL.createObjectURL(new Blob(\n\t\t\t['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveInjectNewQueue&&window.wonbaoInjectedObj.receiveInjectNewQueue('+JSON.stringify(result)+')']\n\t\t\t),{\n\t\t\t\ttype: 'application/javascript'\n\t\t\t}\n\t\t)\n\t\tinjectCustomJs(codeURL, true);\n\t} else if (request.cmd == 'reveiveFetchData') { // 向 page 通知接收到的跨域请求到的数据\n\t\tvar result = {\n\t\t\turl: request.url,\n\t\t\tres: (request.res || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' ),\n\t\t\tuuid: request.uuid,\n\t\t}\n\t\t// console.log('result', result);\n\t\tvar codeURL = URL.createObjectURL(new Blob(\n\t\t\t['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveFetchDataTaskResult&&window.wonbaoInjectedObj.receiveFetchDataTaskResult('+JSON.stringify(result)+')']\n\t\t\t),{\n\t\t\t\ttype: 'application/javascript'\n\t\t\t}\n\t\t)\n\t\tinjectCustomJs(codeURL, true); \n\t} else if (request.cmd == 'receiveHttpRequest') { // 向 page通知接收到时 数握\n\t\tvar result = {\n\t\t\turl: request.url,\n\t\t\tuuid: request.uuid,\n\t\t\tres: request.res //(request.res || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' ),\n\t\t}\n\t\tconsole.log('result', result);\n\t\tvar codeURL = URL.createObjectURL(new Blob(\n\t\t\t['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveHttpRequestTaskResult&&window.wonbaoInjectedObj.receiveHttpRequestTaskResult('+JSON.stringify(result)+')']\n\t\t\t),{\n\t\t\t\ttype: 'application/javascript'\n\t\t\t}\n\t\t)\n\t\tinjectCustomJs(codeURL, true); \n\n\t\t\t\n\t}\n});\n\n// 主动发送消息给后台\n// 要演示此功能，请打开控制台主动执行sendMessageToBackground()\nfunction sendMessageToBackground(message) {\n\tchrome.runtime.sendMessage({cmd:'default', greeting: message || '你好，我是content-script呀，我主动发消息给后台！'}, function(response) {\n\t\ttip('收到来自后台的回复：' + response);\n\t});\n}\n\n// 监听长连接\nchrome.runtime.onConnect.addListener(function(port) {\n\t// console.log(port);\n\tif(port.name == 'test-connect') {\n\t\tport.onMessage.addListener(function(msg) {\n\t\t\t//console.log('收到长连接消息：', msg);\n\t\t\ttip('收到长连接消息：' + JSON.stringify(msg));\n\t\t\tif(msg.question == '你是谁啊？') port.postMessage({answer: '我是你爸！'});\n\t\t});\n\t}\n});\n\nwindow.addEventListener(\"message\", function(e)\n{\n\t// console.log('收到消息：', e.data);\n\tif(e.data && e.data.cmd == 'invoke') {\n\t\teval('('+e.data.code+')');\n\t}\n\telse if(e.data && e.data.cmd == 'message') {\n\t\ttip(e.data.data);\n\t}\n\telse if(e.data.cmd == 'notifyIframeHtmlUsefull') {\n\t\tchrome.runtime.sendMessage({cmd:'notifyIframeHtmlUsefull', href: e.data.href}, function(response) {\n\t\t\t\n\t\t});\n\t}\n\t// 收到复制的html信息\n\telse if(e.data.cmd == 'notifyIframeCopyResult') {\n\t\tchrome.runtime.sendMessage({cmd:'notifyIframeCopyResult', content: e.data.content, href: e.data.href, html: e.data.html}, function(response) {\n\t\t\t\n\t\t});\n\t} else if (e.data.cmd == 'openTab') {\n\t\tchrome.runtime.sendMessage({cmd:'openTab', params: e.data.params}, function(response) {\n\t\t\t\n\t\t});\n\t} else if (e.data.cmd == 'notify') {\n\t\tchrome.runtime.sendMessage({cmd:'notify', params: e.data.params}, function(response) {\n\t\t\t\n\t\t});\n\t} else if(e.data.cmd == 'fetchData') {\n\t\tchrome.runtime.sendMessage({cmd:'fetchData', url: e.data.url, timeout: e.data.timeout, uuid: e.data.uuid, blob: e.data.blob}, function(response) {\n\t\t\t// console.log('fetchHttpContent', response);\n\t\t\t// alert('fetchHttpContent');\n\t\t\t// var result = response.replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' );\n\t\n\t\t\t// alert(request.content);\n\n\n\t\t\t/* var codeURL = URL.createObjectURL(new Blob(\n\t\t\t\t['window.receiveFetchTataTaskResult&&window.receiveFetchTataTaskResult('+response+')']\n\t\t\t\t),{\n\t\t\t\t\ttype: 'application/javascript'\n\t\t\t\t}\n\t\t\t)\n\t\t\tinjectCustomJs(codeURL, true);  */\n\t\t\t// console.log('fetchHttpContent', response);\n\t\t});\n\t} else if (e.data.cmd == 'notifyReceiveTaskFetchHtmlAndDesc') {\n\t\tvar html =  e.data.html;\n\t\tvar desc = e.data.desc;\n\t\tvar msg = e.data.msg;\n\t\t// console.warn(location.href);\n\t\t// console.log('desc', desc);\n\t\tchrome.runtime.sendMessage({\n\t\t\tcmd:'notifyReceiveTaskFetchHtmlAndDesc',\n\t\t\thtml: html,\n\t\t\tdesc: desc,\n\t\t\turl: location.href,\n\t\t\tmsg: msg,\n\t\t}, function(response) {\n\n\t\t})\n\t} else if (e.data.cmd == 'httpRequest') {\n\t\tconsole.log([e.data.url, e.data.uuid, e.data.responseType]);\n\t\tchrome.runtime.sendMessage({cmd:'httpRequest', url: e.data.url, uuid: e.data.uuid, responseType: e.data.responseType}, function(response) {\n\t\t});\n\t} else if(e.data.cmd == 'sendDownload') {\n\t\tconsole.log([e.data.url, e.data.fileName]);\n\t\tchrome.runtime.sendMessage({cmd:'sendDownload', url: e.data.url, fileName: e.data.fileName}, function(response) {\n\t\t});\n\t}\n}, false);\n\nfunction initCustomEventListen() {\n\tvar hiddenDiv = document.getElementById('myCustomEventDiv');\n\tif(!hiddenDiv) {\n\t\thiddenDiv = document.createElement('div');\n\t\thiddenDiv.style.display = 'none';\n\t\thiddenDiv.id = 'myCustomEventDiv';\n\t\tdocument.body.appendChild(hiddenDiv);\n\t}\n\thiddenDiv.addEventListener('myCustomEvent', function() {\n\t\tvar eventData = document.getElementById('myCustomEventDiv').innerText;\n\t\ttip('收到自定义事件：' + eventData);\n\t});\n}\n\nvar tipCount = 0;\n// 简单的消息通知\nfunction tip(info) {\n\tinfo = info || '';\n\tvar ele = document.createElement('div');\n\tele.className = 'chrome-plugin-simple-tip slideInLeft';\n\tele.style.top = tipCount * 70 + 20 + 'px';\n\tele.innerHTML = '<div>'+info+'</div>';\n\tdocument.body.appendChild(ele);\n\tele.classList.add('animated');\n\ttipCount++;\n\tsetTimeout(function() {\n\t\tele.style.top = '-100px';\n\t\tsetTimeout(function() {\n\t\t\tele.remove();\n\t\t\ttipCount--;\n\t\t}, 400);\n\t}, 3000);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/content-script.js"],"sourceRoot":""}