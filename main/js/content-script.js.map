{"version":3,"sources":["webpack:///content-script.js","webpack:///webpack/bootstrap fee07b83465bd39117de?c950***","webpack:///./src/content-script.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","16","injectCustomJs","jsPath","additional","temp","document","createElement","setAttribute","src","chrome","extension","getURL","body","appendChild","onload","this","parentNode","removeChild","sendMessageToBackground","message","runtime","sendMessage","cmd","greeting","response","tip","initCustomEventListen","hiddenDiv","getElementById","style","display","id","addEventListener","innerText","info","ele","className","top","tipCount","innerHTML","classList","add","setTimeout","remove","console","log","window","jQuery","onMessage","addListener","request","sender","sendResponse","tab","url","size","head","cookie","content","$","node","html","JSON","stringify","date","Date","now","href","location","getElementsByTagName","fetchDescURL","URL","createObjectURL","Blob","type","result","codeURL","replace","desc","msg","res","uuid","onConnect","port","question","postMessage","answer","e","data","eval","code","params","timeout","blob","responseType","fileName"],"mappings":"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","file":"content-script.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/main/js/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 16);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 16:\n/***/ (function(module, exports) {\n\nconsole.log('这是content script!');\n// 注意，必须设置了run_at=document_start 此段代码才会生效\ndocument.addEventListener('DOMContentLoaded', function () {\n\t// var hostNames = ['item.taobao.com', 'detail.tmall.com', 'detail.1688.com']\n\t// 注入自定义JS\n\tif (!window.jQuery) {\n\t\tinjectCustomJs('js/jq.js');\n\t}\n\tinjectCustomJs();\n});\n\n/* function initCustomPanel()\r\n{\r\n\tvar panel = document.createElement('div');\r\n\tpanel.className = 'chrome-plugin-demo-panel';\r\n\tpanel.innerHTML = '\\\r\n\t\t<h2>injected-script操作content-script演示区：</h2>\\\r\n\t\t<div class=\"btn-area\">\\\r\n\t\t\t<a href=\"javascript:sendMessageToContentScriptByPostMessage(\\'你好，我是普通页面！\\')\">通过postMessage发送消息给content-script</a><br>\\\r\n\t\t\t<a href=\"javascript:sendMessageToContentScriptByEvent(\\'你好啊！我是通过DOM事件发送的消息！\\')\">通过DOM事件发送消息给content-script</a><br>\\\r\n\t\t\t<a href=\"javascript:invokeContentScript(\\'sendMessageToBackground()\\')\">发送消息到后台或者popup</a><br>\\\r\n\t\t</div>\\\r\n\t\t<div id=\"my_custom_log\">\\\r\n\t\t</div>\\\r\n\t';\r\n\tdocument.body.appendChild(panel);\r\n}*/\n\n// 向页面注入JS\nfunction injectCustomJs(jsPath, additional) {\n\tjsPath = jsPath || 'js/inject.js';\n\tvar temp = document.createElement('script');\n\ttemp.setAttribute('type', 'text/javascript');\n\t// 获得的地址类似：chrome-extension://ihcokhadfjfchaeagdoclpnjdiokfakg/js/inject.js\n\tif (!additional) {\n\t\ttemp.src = chrome.extension.getURL(jsPath);\n\t\t// console.log(chrome.extension.getURL(jsPath));\n\t} else {\n\t\ttemp.src = jsPath;\n\t}\n\tdocument.body.appendChild(temp);\n\ttemp.onload = function () {\n\t\t// 执行完后移除掉\n\t\tthis.parentNode.removeChild(this);\n\t};\n}\n\n// 接收来自后台的消息\nchrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {\n\tconsole.log('收到来自 ' + (sender.tab ? \"content-script(\" + sender.tab.url + \")\" : \"popup或者background\") + ' 的消息：', request);\n\tif (request.cmd == 'update_font_size') {\n\t\tvar ele = document.createElement('style');\n\t\tele.innerHTML = '* {font-size: ' + request.size + 'px !important;}';\n\t\tdocument.head.appendChild(ele);\n\t} else if (request.cmd == 'getContent') {\n\t\tvar cookie = document.cookie;\n\t\tvar content = $(request.node || 'body').html();\n\t\tvar response = JSON.stringify({\n\t\t\tcookie: cookie,\n\t\t\tcontent: content,\n\t\t\tdate: Date.now(),\n\t\t\thref: location.href\n\t\t});\n\t\tsendResponse(response);\n\t} else if (request.cmd == 'fetchHtmlAndDesc') {\n\t\t// \n\t\tvar content = document.getElementsByTagName('html')[0].innerHTML;\n\t\t// console.log(location.href);\n\t\t// console.log('content', content);\n\t\tsendResponse(content);\n\t\tvar fetchDescURL = URL.createObjectURL(new Blob(['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveTaskFetchHtmlAndDesc&&window.wonbaoInjectedObj.receiveTaskFetchHtmlAndDesc()']), {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t\tinjectCustomJs(fetchDescURL, true);\n\t} else if (request.cmd == 'notifyIframeUsefull') {\n\t\t// 向 page 通知 iframe有内容\n\t\tvar result = {\n\t\t\thref: request.href\n\t\t\t// alert(request.content);\n\t\t};var codeURL = URL.createObjectURL(new Blob(['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveNotifyIframeUsefull && window.wonbaoInjectedObj.receiveNotifyIframeUsefull(' + JSON.stringify(result) + ')']), {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t\tinjectCustomJs(codeURL, true);\n\t} else if (request.cmd == 'reveiverIframeHtml') {\n\t\t// 向 page 通知 iframe 的html内容\n\t\tvar result = {\n\t\t\thref: request.href,\n\t\t\tcontent: (request.content || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt'),\n\t\t\thtml: (request.html || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt')\n\t\t\t// alert(request.content);\n\t\t};var codeURL = URL.createObjectURL(new Blob(['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveTaskResult&&window.wonbaoInjectedObj.receiveTaskResult(' + JSON.stringify(result) + ')']), {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t\tinjectCustomJs(codeURL, true);\n\t\t// tip(JSON.stringify(request));\n\t\t// sendResponse('我收到你的消息了：'+JSON.stringify(request));\n\t} else if (request.cmd == 'receiveNewQueue') {\n\t\t// 向 page 通知接收到 复制请链接等内容\n\t\t// console.log('request', request);\n\n\t\tvar url = request.url;\n\t\tvar html = request.html;\n\t\tvar desc = request.desc;\n\t\tvar msg = request.msg;\n\n\t\tvar result = {\n\t\t\turl: url,\n\t\t\thtml: (html || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt'),\n\t\t\tdesc: (desc || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt'),\n\t\t\tmsg: msg\n\t\t};\n\t\tvar codeURL = URL.createObjectURL(new Blob(['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveInjectNewQueue&&window.wonbaoInjectedObj.receiveInjectNewQueue(' + JSON.stringify(result) + ')']), {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t\tinjectCustomJs(codeURL, true);\n\t} else if (request.cmd == 'reveiveFetchData') {\n\t\t// 向 page 通知接收到的跨域请求到的数据\n\t\tvar result = {\n\t\t\turl: request.url,\n\t\t\tres: (request.res || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt'),\n\t\t\tuuid: request.uuid\n\t\t\t// console.log('result', result);\n\t\t};var codeURL = URL.createObjectURL(new Blob(['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveFetchDataTaskResult&&window.wonbaoInjectedObj.receiveFetchDataTaskResult(' + JSON.stringify(result) + ')']), {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t\tinjectCustomJs(codeURL, true);\n\t} else if (request.cmd == 'receiveHttpRequest') {\n\t\t// 向 page通知接收到时 数握\n\t\tvar result = {\n\t\t\turl: request.url,\n\t\t\tuuid: request.uuid,\n\t\t\tres: request.res //(request.res || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' ),\n\t\t};\n\t\tconsole.log('result', result);\n\t\tvar codeURL = URL.createObjectURL(new Blob(['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveHttpRequestTaskResult&&window.wonbaoInjectedObj.receiveHttpRequestTaskResult(' + JSON.stringify(result) + ')']), {\n\t\t\ttype: 'application/javascript'\n\t\t});\n\t\tinjectCustomJs(codeURL, true);\n\t}\n});\n\n// 主动发送消息给后台\n// 要演示此功能，请打开控制台主动执行sendMessageToBackground()\nfunction sendMessageToBackground(message) {\n\tchrome.runtime.sendMessage({ cmd: 'default', greeting: message || '你好，我是content-script呀，我主动发消息给后台！' }, function (response) {\n\t\ttip('收到来自后台的回复：' + response);\n\t});\n}\n\n// 监听长连接\nchrome.runtime.onConnect.addListener(function (port) {\n\tconsole.log(port);\n\tif (port.name == 'test-connect') {\n\t\tport.onMessage.addListener(function (msg) {\n\t\t\t//console.log('收到长连接消息：', msg);\n\t\t\ttip('收到长连接消息：' + JSON.stringify(msg));\n\t\t\tif (msg.question == '你是谁啊？') port.postMessage({ answer: '我是你爸！' });\n\t\t});\n\t}\n});\n\nwindow.addEventListener(\"message\", function (e) {\n\t// console.log('收到消息：', e.data);\n\tif (e.data && e.data.cmd == 'invoke') {\n\t\teval('(' + e.data.code + ')');\n\t} else if (e.data && e.data.cmd == 'message') {\n\t\ttip(e.data.data);\n\t} else if (e.data.cmd == 'notifyIframeHtmlUsefull') {\n\t\tchrome.runtime.sendMessage({ cmd: 'notifyIframeHtmlUsefull', href: e.data.href }, function (response) {});\n\t}\n\t// 收到复制的html信息\n\telse if (e.data.cmd == 'notifyIframeCopyResult') {\n\t\t\tchrome.runtime.sendMessage({ cmd: 'notifyIframeCopyResult', content: e.data.content, href: e.data.href, html: e.data.html }, function (response) {});\n\t\t} else if (e.data.cmd == 'openTab') {\n\t\t\tchrome.runtime.sendMessage({ cmd: 'openTab', params: e.data.params }, function (response) {});\n\t\t} else if (e.data.cmd == 'notify') {\n\t\t\tchrome.runtime.sendMessage({ cmd: 'notify', params: e.data.params }, function (response) {});\n\t\t} else if (e.data.cmd == 'fetchData') {\n\t\t\t// alert('fetchData----');\n\t\t\tchrome.runtime.sendMessage({ cmd: 'fetchData', url: e.data.url, timeout: e.data.timeout, uuid: e.data.uuid, blob: e.data.blob }, function (response) {\n\t\t\t\t// console.log('fetchHttpContent', response);\n\t\t\t\t// alert('fetchHttpContent');\n\t\t\t\t// var result = response.replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' );\n\n\t\t\t\t// alert(request.content);\n\n\n\t\t\t\t/* var codeURL = URL.createObjectURL(new Blob(\r\n    \t['window.receiveFetchTataTaskResult&&window.receiveFetchTataTaskResult('+response+')']\r\n    \t),{\r\n    \t\ttype: 'application/javascript'\r\n    \t}\r\n    )\r\n    injectCustomJs(codeURL, true);  */\n\t\t\t\t// console.log('fetchHttpContent', response);\n\t\t\t});\n\t\t} else if (e.data.cmd == 'notifyReceiveTaskFetchHtmlAndDesc') {\n\t\t\tvar html = e.data.html;\n\t\t\tvar desc = e.data.desc;\n\t\t\tvar msg = e.data.msg;\n\t\t\t// console.warn(location.href);\n\t\t\t// console.log('desc', desc);\n\t\t\tchrome.runtime.sendMessage({\n\t\t\t\tcmd: 'notifyReceiveTaskFetchHtmlAndDesc',\n\t\t\t\thtml: html,\n\t\t\t\tdesc: desc,\n\t\t\t\turl: location.href,\n\t\t\t\tmsg: msg\n\t\t\t}, function (response) {});\n\t\t} else if (e.data.cmd == 'httpRequest') {\n\t\t\tconsole.log([e.data.url, e.data.uuid, e.data.responseType]);\n\t\t\tchrome.runtime.sendMessage({ cmd: 'httpRequest', url: e.data.url, uuid: e.data.uuid, responseType: e.data.responseType }, function (response) {});\n\t\t} else if (e.data.cmd == 'sendDownload') {\n\t\t\tconsole.log([e.data.url, e.data.fileName]);\n\t\t\tchrome.runtime.sendMessage({ cmd: 'sendDownload', url: e.data.url, fileName: e.data.fileName }, function (response) {});\n\t\t}\n}, false);\n\nfunction initCustomEventListen() {\n\tvar hiddenDiv = document.getElementById('myCustomEventDiv');\n\tif (!hiddenDiv) {\n\t\thiddenDiv = document.createElement('div');\n\t\thiddenDiv.style.display = 'none';\n\t\thiddenDiv.id = 'myCustomEventDiv';\n\t\tdocument.body.appendChild(hiddenDiv);\n\t}\n\thiddenDiv.addEventListener('myCustomEvent', function () {\n\t\tvar eventData = document.getElementById('myCustomEventDiv').innerText;\n\t\ttip('收到自定义事件：' + eventData);\n\t});\n}\n\nvar tipCount = 0;\n// 简单的消息通知\nfunction tip(info) {\n\tinfo = info || '';\n\tvar ele = document.createElement('div');\n\tele.className = 'chrome-plugin-simple-tip slideInLeft';\n\tele.style.top = tipCount * 70 + 20 + 'px';\n\tele.innerHTML = '<div>' + info + '</div>';\n\tdocument.body.appendChild(ele);\n\tele.classList.add('animated');\n\ttipCount++;\n\tsetTimeout(function () {\n\t\tele.style.top = '-100px';\n\t\tsetTimeout(function () {\n\t\t\tele.remove();\n\t\t\ttipCount--;\n\t\t}, 400);\n\t}, 3000);\n}\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// content-script.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/main/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fee07b83465bd39117de","console.log('这是content script!');\r\n// 注意，必须设置了run_at=document_start 此段代码才会生效\r\ndocument.addEventListener('DOMContentLoaded', function()\r\n{\t\r\n\t// var hostNames = ['item.taobao.com', 'detail.tmall.com', 'detail.1688.com']\r\n\t// 注入自定义JS\r\n\tif(!window.jQuery) {\r\n\t\tinjectCustomJs('js/jq.js');\r\n\t}\r\n\tinjectCustomJs();\r\n\r\n});\r\n\r\n/* function initCustomPanel()\r\n{\r\n\tvar panel = document.createElement('div');\r\n\tpanel.className = 'chrome-plugin-demo-panel';\r\n\tpanel.innerHTML = '\\\r\n\t\t<h2>injected-script操作content-script演示区：</h2>\\\r\n\t\t<div class=\"btn-area\">\\\r\n\t\t\t<a href=\"javascript:sendMessageToContentScriptByPostMessage(\\'你好，我是普通页面！\\')\">通过postMessage发送消息给content-script</a><br>\\\r\n\t\t\t<a href=\"javascript:sendMessageToContentScriptByEvent(\\'你好啊！我是通过DOM事件发送的消息！\\')\">通过DOM事件发送消息给content-script</a><br>\\\r\n\t\t\t<a href=\"javascript:invokeContentScript(\\'sendMessageToBackground()\\')\">发送消息到后台或者popup</a><br>\\\r\n\t\t</div>\\\r\n\t\t<div id=\"my_custom_log\">\\\r\n\t\t</div>\\\r\n\t';\r\n\tdocument.body.appendChild(panel);\r\n}*/\r\n\r\n// 向页面注入JS\r\nfunction injectCustomJs(jsPath, additional)\r\n{\r\n\tjsPath = jsPath || 'js/inject.js';\r\n\tvar temp = document.createElement('script');\r\n\ttemp.setAttribute('type', 'text/javascript');\r\n\t// 获得的地址类似：chrome-extension://ihcokhadfjfchaeagdoclpnjdiokfakg/js/inject.js\r\n\tif(!additional) {\r\n\t\ttemp.src = chrome.extension.getURL(jsPath);\r\n\t\t// console.log(chrome.extension.getURL(jsPath));\r\n\t} else {\r\n\t\ttemp.src = jsPath;\r\n\t}\r\n\tdocument.body.appendChild(temp);\r\n\ttemp.onload = function()\r\n\t{\r\n\t\t// 执行完后移除掉\r\n\t\tthis.parentNode.removeChild(this);\r\n\t};\r\n}\r\n\r\n// 接收来自后台的消息\r\nchrome.runtime.onMessage.addListener(function(request, sender, sendResponse)\r\n{\r\n\tconsole.log('收到来自 ' + (sender.tab ? \"content-script(\" + sender.tab.url + \")\" : \"popup或者background\") + ' 的消息：', request);\r\n\tif(request.cmd == 'update_font_size') {\r\n\t\tvar ele = document.createElement('style');\r\n\t\tele.innerHTML = ('* {font-size: '+request.size+'px !important;}');\r\n\t\tdocument.head.appendChild(ele);\r\n\t}\r\n\telse if(request.cmd == 'getContent') {\r\n\t\tvar cookie = document.cookie;\r\n\t\tvar content = $(request.node || 'body').html();\r\n\t\tvar response = JSON.stringify(\r\n\t\t\t{\r\n\t\t\t\tcookie: cookie,\r\n\t\t\t\tcontent: content,\r\n\t\t\t\tdate: Date.now(),\r\n\t\t\t\thref: location.href,\r\n\t\t\t}\r\n\t\t) \r\n\t\tsendResponse(response);\r\n\t} else if(request.cmd == 'fetchHtmlAndDesc') { // \r\n\t\tvar content = document.getElementsByTagName('html')[0].innerHTML;\r\n\t\t// console.log(location.href);\r\n\t\t// console.log('content', content);\r\n\t\tsendResponse(content);\r\n\t\tvar fetchDescURL = URL.createObjectURL(new Blob(\r\n\t\t\t['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveTaskFetchHtmlAndDesc&&window.wonbaoInjectedObj.receiveTaskFetchHtmlAndDesc()']\r\n\t\t\t),{\r\n\t\t\t\ttype: 'application/javascript'\r\n\t\t\t}\r\n\t\t)\r\n\t\tinjectCustomJs(fetchDescURL, true);\r\n\r\n\t}\r\n\telse if(request.cmd == 'notifyIframeUsefull') { // 向 page 通知 iframe有内容\r\n\t\tvar result = {\r\n\t\t\thref: request.href,\r\n\t\t}\r\n\t\t// alert(request.content);\r\n\t\tvar codeURL = URL.createObjectURL(new Blob(\r\n\t\t\t['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveNotifyIframeUsefull && window.wonbaoInjectedObj.receiveNotifyIframeUsefull('+JSON.stringify(result)+')']\r\n\t\t\t),{\r\n\t\t\t\ttype: 'application/javascript'\r\n\t\t\t}\r\n\t\t)\r\n\t\tinjectCustomJs(codeURL, true);\r\n\t}\r\n\telse if(request.cmd == 'reveiverIframeHtml') { // 向 page 通知 iframe 的html内容\r\n\t\tvar result = {\r\n\t\t\thref: request.href,\r\n\t\t\tcontent: (request.content || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' ),\r\n\t\t\thtml: (request.html ||'').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' ),\r\n\t\t}\r\n\t\t// alert(request.content);\r\n\t\tvar codeURL = URL.createObjectURL(new Blob(\r\n\t\t\t['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveTaskResult&&window.wonbaoInjectedObj.receiveTaskResult('+JSON.stringify(result)+')']\r\n\t\t\t),{\r\n\t\t\t\ttype: 'application/javascript'\r\n\t\t\t}\r\n\t\t)\r\n\t\tinjectCustomJs(codeURL, true);\r\n\t\t// tip(JSON.stringify(request));\r\n\t\t// sendResponse('我收到你的消息了：'+JSON.stringify(request));\r\n\t} else if(request.cmd == 'receiveNewQueue') { // 向 page 通知接收到 复制请链接等内容\r\n\t\t// console.log('request', request);\r\n\r\n\t\tvar url = request.url;\r\n\t\tvar html = request.html;\r\n\t\tvar desc = request.desc;\r\n\t\tvar msg = request.msg;\r\n\r\n\t\tvar result = {\r\n\t\t\turl: url,\r\n\t\t\thtml: (html || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' ),\r\n\t\t\tdesc: (desc || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' ),\r\n\t\t\tmsg: msg,\r\n\t\t}\r\n\t\tvar codeURL = URL.createObjectURL(new Blob(\r\n\t\t\t['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveInjectNewQueue&&window.wonbaoInjectedObj.receiveInjectNewQueue('+JSON.stringify(result)+')']\r\n\t\t\t),{\r\n\t\t\t\ttype: 'application/javascript'\r\n\t\t\t}\r\n\t\t)\r\n\t\tinjectCustomJs(codeURL, true);\r\n\t} else if (request.cmd == 'reveiveFetchData') { // 向 page 通知接收到的跨域请求到的数据\r\n\t\tvar result = {\r\n\t\t\turl: request.url,\r\n\t\t\tres: (request.res || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' ),\r\n\t\t\tuuid: request.uuid,\r\n\t\t}\r\n\t\t// console.log('result', result);\r\n\t\tvar codeURL = URL.createObjectURL(new Blob(\r\n\t\t\t['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveFetchDataTaskResult&&window.wonbaoInjectedObj.receiveFetchDataTaskResult('+JSON.stringify(result)+')']\r\n\t\t\t),{\r\n\t\t\t\ttype: 'application/javascript'\r\n\t\t\t}\r\n\t\t)\r\n\t\tinjectCustomJs(codeURL, true); \r\n\t} else if (request.cmd == 'receiveHttpRequest') { // 向 page通知接收到时 数握\r\n\t\tvar result = {\r\n\t\t\turl: request.url,\r\n\t\t\tuuid: request.uuid,\r\n\t\t\tres: request.res //(request.res || '').replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' ),\r\n\t\t}\r\n\t\tconsole.log('result', result);\r\n\t\tvar codeURL = URL.createObjectURL(new Blob(\r\n\t\t\t['window.wonbaoInjectedObj&&window.wonbaoInjectedObj.receiveHttpRequestTaskResult&&window.wonbaoInjectedObj.receiveHttpRequestTaskResult('+JSON.stringify(result)+')']\r\n\t\t\t),{\r\n\t\t\t\ttype: 'application/javascript'\r\n\t\t\t}\r\n\t\t)\r\n\t\tinjectCustomJs(codeURL, true); \r\n\r\n\t\t\t\r\n\t}\r\n});\r\n\r\n// 主动发送消息给后台\r\n// 要演示此功能，请打开控制台主动执行sendMessageToBackground()\r\nfunction sendMessageToBackground(message) {\r\n\tchrome.runtime.sendMessage({cmd:'default', greeting: message || '你好，我是content-script呀，我主动发消息给后台！'}, function(response) {\r\n\t\ttip('收到来自后台的回复：' + response);\r\n\t});\r\n}\r\n\r\n// 监听长连接\r\nchrome.runtime.onConnect.addListener(function(port) {\r\n\tconsole.log(port);\r\n\tif(port.name == 'test-connect') {\r\n\t\tport.onMessage.addListener(function(msg) {\r\n\t\t\t//console.log('收到长连接消息：', msg);\r\n\t\t\ttip('收到长连接消息：' + JSON.stringify(msg));\r\n\t\t\tif(msg.question == '你是谁啊？') port.postMessage({answer: '我是你爸！'});\r\n\t\t});\r\n\t}\r\n});\r\n\r\nwindow.addEventListener(\"message\", function(e)\r\n{\r\n\t// console.log('收到消息：', e.data);\r\n\tif(e.data && e.data.cmd == 'invoke') {\r\n\t\teval('('+e.data.code+')');\r\n\t}\r\n\telse if(e.data && e.data.cmd == 'message') {\r\n\t\ttip(e.data.data);\r\n\t}\r\n\telse if(e.data.cmd == 'notifyIframeHtmlUsefull') {\r\n\t\tchrome.runtime.sendMessage({cmd:'notifyIframeHtmlUsefull', href: e.data.href}, function(response) {\r\n\t\t\t\r\n\t\t});\r\n\t}\r\n\t// 收到复制的html信息\r\n\telse if(e.data.cmd == 'notifyIframeCopyResult') {\r\n\t\tchrome.runtime.sendMessage({cmd:'notifyIframeCopyResult', content: e.data.content, href: e.data.href, html: e.data.html}, function(response) {\r\n\t\t\t\r\n\t\t});\r\n\t} else if (e.data.cmd == 'openTab') {\r\n\t\tchrome.runtime.sendMessage({cmd:'openTab', params: e.data.params}, function(response) {\r\n\t\t\t\r\n\t\t});\r\n\t} else if (e.data.cmd == 'notify') {\r\n\t\tchrome.runtime.sendMessage({cmd:'notify', params: e.data.params}, function(response) {\r\n\t\t\t\r\n\t\t});\r\n\t} else if(e.data.cmd == 'fetchData') {\r\n\t\t// alert('fetchData----');\r\n\t\tchrome.runtime.sendMessage({cmd:'fetchData', url: e.data.url, timeout: e.data.timeout, uuid: e.data.uuid, blob: e.data.blob}, function(response) {\r\n\t\t\t// console.log('fetchHttpContent', response);\r\n\t\t\t// alert('fetchHttpContent');\r\n\t\t\t// var result = response.replace(/'/mig, 'a1562723483981KJZvFoxt').replace(/\"/mig, 'b1562723483981KJZvFoxt' );\r\n\t\r\n\t\t\t// alert(request.content);\r\n\r\n\r\n\t\t\t/* var codeURL = URL.createObjectURL(new Blob(\r\n\t\t\t\t['window.receiveFetchTataTaskResult&&window.receiveFetchTataTaskResult('+response+')']\r\n\t\t\t\t),{\r\n\t\t\t\t\ttype: 'application/javascript'\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\tinjectCustomJs(codeURL, true);  */\r\n\t\t\t// console.log('fetchHttpContent', response);\r\n\t\t});\r\n\t} else if (e.data.cmd == 'notifyReceiveTaskFetchHtmlAndDesc') {\r\n\t\tvar html =  e.data.html;\r\n\t\tvar desc = e.data.desc;\r\n\t\tvar msg = e.data.msg;\r\n\t\t// console.warn(location.href);\r\n\t\t// console.log('desc', desc);\r\n\t\tchrome.runtime.sendMessage({\r\n\t\t\tcmd:'notifyReceiveTaskFetchHtmlAndDesc',\r\n\t\t\thtml: html,\r\n\t\t\tdesc: desc,\r\n\t\t\turl: location.href,\r\n\t\t\tmsg: msg,\r\n\t\t}, function(response) {\r\n\r\n\t\t})\r\n\t} else if (e.data.cmd == 'httpRequest') {\r\n\t\tconsole.log([e.data.url, e.data.uuid, e.data.responseType]);\r\n\t\tchrome.runtime.sendMessage({cmd:'httpRequest', url: e.data.url, uuid: e.data.uuid, responseType: e.data.responseType}, function(response) {\r\n\t\t});\r\n\t} else if(e.data.cmd == 'sendDownload') {\r\n\t\tconsole.log([e.data.url, e.data.fileName]);\r\n\t\tchrome.runtime.sendMessage({cmd:'sendDownload', url: e.data.url, fileName: e.data.fileName}, function(response) {\r\n\t\t});\r\n\t}\r\n}, false);\r\n\r\nfunction initCustomEventListen() {\r\n\tvar hiddenDiv = document.getElementById('myCustomEventDiv');\r\n\tif(!hiddenDiv) {\r\n\t\thiddenDiv = document.createElement('div');\r\n\t\thiddenDiv.style.display = 'none';\r\n\t\thiddenDiv.id = 'myCustomEventDiv';\r\n\t\tdocument.body.appendChild(hiddenDiv);\r\n\t}\r\n\thiddenDiv.addEventListener('myCustomEvent', function() {\r\n\t\tvar eventData = document.getElementById('myCustomEventDiv').innerText;\r\n\t\ttip('收到自定义事件：' + eventData);\r\n\t});\r\n}\r\n\r\nvar tipCount = 0;\r\n// 简单的消息通知\r\nfunction tip(info) {\r\n\tinfo = info || '';\r\n\tvar ele = document.createElement('div');\r\n\tele.className = 'chrome-plugin-simple-tip slideInLeft';\r\n\tele.style.top = tipCount * 70 + 20 + 'px';\r\n\tele.innerHTML = '<div>'+info+'</div>';\r\n\tdocument.body.appendChild(ele);\r\n\tele.classList.add('animated');\r\n\ttipCount++;\r\n\tsetTimeout(function() {\r\n\t\tele.style.top = '-100px';\r\n\t\tsetTimeout(function() {\r\n\t\t\tele.remove();\r\n\t\t\ttipCount--;\r\n\t\t}, 400);\r\n\t}, 3000);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/content-script.js"],"sourceRoot":""}