{"version":3,"sources":["webpack:///webpack/bootstrap 7d8caa157e88b5348ceb?c3d9****","webpack:///./src/background.js"],"names":["shouldSendToTab","url","list","should","forEach","item","match","bgUtil","ver","removeMenuItem","chrome","contextMenus","remove","createMenuItem","itemId","documentUrlPatterns","ua","navigator","userAgent","toLocaleLowerCase","create","title","id","icon","path","onclick","tabs","query","active","currentWindow","currentTab","sendMessage","cmd","response","onClicked","addListener","a","b","menuItemId","notify","params","notifications","type","iconUrl","message","setBadgeText","text","browserAction","setStorage","storage","sync","set","backgroundInit","contentMap","runtime","onMessage","request","sender","sendResponse","JSON","stringify","tab","index","indexOf","href","content","html","$","ajax","timeout","async","data","dataType","success","dist","res","responseText","uuid","sendFetchDataToContentScript","error","desc","msg","xhr","XMLHttpRequest","open","responseType","onreadystatechange","readyState","status","blob","file","FileReader","onload","result","readAsDataURL","send","dlData","downloads","download","filename","fileName","conflictAction","saveAs","click","e","console","log","views","extension","getViews","length","alert","document","getCurrentTabId","callback","openUrlCurrentTab","tabId","update","openUrlNewTab","testBackground"],"mappings":"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","file":"background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/main/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7d8caa157e88b5348ceb","//-------------------- 右键菜单演示 ------------------------//\r\nfunction shouldSendToTab(url) {\r\n\t// tab.url.indexOf('danbooru') > -1 || tab.url.indexOf('yande.re') > -1  ||tab.url.indexOf('localhost') > -1 || tab.url.indexOf('wonbao') > -1 || tab.url.indexOf('file:') > -1 || tab.url.indexOf('192.168') > -1\r\n\tlet list = [\r\n\t\t/danbooru/,\r\n\t\t/yande.re/,\r\n\t\t/baidu.com/,\r\n\t\t/bilibili.com/,\r\n\t\t/www.acfun.cn\\/a\\//,\r\n\t\t/localhost/\r\n\t]\r\n\tlet should = false;\r\n\tlist.forEach((item)=>{\r\n\t\tif(url.match(item)) {\r\n\t\t\tshould = true;\r\n\t\t}\r\n\t})\r\n\treturn should;\r\n\r\n}\r\nvar bgUtil = {\r\n\tver: '1.0.0',\r\n\t// 删除右键菜单（未使用）\r\n\tremoveMenuItem: function () {\r\n\t\tchrome.contextMenus.remove('wb-context', function() {\r\n\t\t})\r\n\t},\r\n\tcreateMenuItem: function () {\r\n\t\tvar itemId = 'wb-context-add-to-copy-list';\r\n\t\t// 只在下列网站显示右键菜单\r\n\t\tvar documentUrlPatterns = [\r\n\t\t\t'https://detail.tmall.com/*',\r\n\t\t\t'https://item.taobao.com/*',\r\n\t\t\t'https://detail.1688.com/*',\r\n\t\t\t'https://h5.m.taobao.com/*',\r\n\t\t\t'https://detail.m.tmall.com/*',\r\n\t\t\t'https://m.1688.com/*'\r\n\t\t];\r\n\r\n\t\tvar ua = navigator.userAgent.toLocaleLowerCase();\r\n\t\t// 搜狗浏览器没 默认icon，要手动添加，而稍旧的版本不支持onclick属性\r\n\t\tif(ua.match(/metasr/) != null){\r\n\t\t\tchrome.contextMenus.create({\r\n\t\t\t\ttitle: \"添加到宝贝复制队列\",\r\n\t\t\t\tid: itemId,\r\n\t\t\t\ticon: {path: 'img/icon.png'},\r\n\t\t\t\t// 右键菜单只在下列网站可用\r\n\t\t\t\tdocumentUrlPatterns: documentUrlPatterns,\r\n\t\t\t\tonclick: function(){\r\n\t\t\t\t\tchrome.tabs.query({active: true, currentWindow: true}, function(currentTab){\r\n\t\t\t\t\t\t// 当前页面的url\r\n\t\t\t\t\t\t// 向当前页面的content-script 发送获取html内容的请求\r\n\t\t\t\t\t\tchrome.tabs.sendMessage(currentTab[0].id, {cmd: \"fetchHtmlAndDesc\"}, function(response) {\r\n\t\t\t\t\t\t\tresponse();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tchrome.contextMenus.onClicked.addListener(function(a, b) {\r\n\t\t\t\tif(a.menuItemId == itemId) {\r\n\t\t\t\t\tchrome.tabs.query({active: true, currentWindow: true}, function(currentTab){\r\n\t\t\t\t\t\t// 当前页面的url\r\n\t\t\t\t\t\t// 向当前页面的content-script 发送获取html内容的请求\r\n\t\t\t\t\t\tchrome.tabs.sendMessage(currentTab[0].id, {cmd: \"fetchHtmlAndDesc\"}, function(response) {\r\n\t\t\t\t\t\t\tresponse();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\t\tchrome.contextMenus.create({\r\n\t\t\t\t\ttitle: \"添加到宝贝复制队列\",\r\n\t\t\t\t\tid: itemId,\r\n\t\t\t\t\t// 右键菜单只在下列网站可用\r\n\t\t\t\t\tdocumentUrlPatterns: documentUrlPatterns,\r\n\t\t\t\t\tonclick: function(){\r\n\t\t\t\t\t\tchrome.tabs.query({active: true, currentWindow: true}, function(currentTab){\r\n\t\t\t\t\t\t\t// 当前页面的url\r\n\t\t\t\t\t\t\t// 向当前页面的content-script 发送获取html内容的请求\r\n\t\t\t\t\t\t\tchrome.tabs.sendMessage(currentTab[0].id, {cmd: \"fetchHtmlAndDesc\"}, function(response) {\r\n\t\t\t\t\t\t\t\tresponse();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t},\r\n\t// 电脑右下角通知\r\n\tnotify: function (params) {\r\n\t\tchrome.notifications.create(null, {\r\n\t\t\ttype: params.type || 'basic',\r\n\t\t\ticonUrl: params.iconUrl || 'img/icon.png',\r\n\t\t\ttitle: params.title || '这是标题',\r\n\t\t\tmessage: params.message || ''\r\n\t\t});\r\n\t},\r\n\tsetBadgeText: function (text) {\r\n\t\tchrome.browserAction.setBadgeText({text: text});\r\n\t},\r\n\tsetStorage: function(params) {\r\n\t\tchrome.storage.sync.set(params);\r\n\t}\r\n}\r\n\r\n\r\nfunction backgroundInit() {\r\n\t\r\n\tbgUtil.createMenuItem();\r\n\tbgUtil.setStorage({ver: bgUtil.ver});\r\n\t// 能够检测版本的url\r\n\t/* var verUrl = 'http://wdb.wonbao.com/goodsCopyVer.json';\r\n\t$.ajax({\r\n\t\ttype: \"GET\",\r\n\t\turl: verUrl,\r\n\t\tasync: false,\r\n\t\tdata: {},\r\n\t\tdataType: \"json\",\r\n\t\tsuccess: function(data){\r\n\t\t\tif(data.ver != bgUtil.ver) {\r\n\t\t\t\tbgUtil.setBadgeText('new');\r\n\t\t\t}\r\n\t\t},\r\n\t\terror: function(data) {\r\n\t\t}\r\n\t});\r\n\t*/\r\n}\r\nbackgroundInit();\r\n//-------------------- badge演示 ------------------------//\r\nvar contentMap = {\r\n}\r\n// 监听来自content-script的消息\r\nchrome.runtime.onMessage.addListener(function(request, sender, sendResponse)\r\n{\t\r\n\t// 只作测试用\r\n\tif(request.cmd =='default') {\r\n\t\t// console.log('收到来自content-script的消息：');\r\n\t\t// console.log(request, sender, sendResponse);\r\n\t\tsendResponse('我是后台，我已收到你的消息：' + JSON.stringify(request));\r\n\t} /*else if(request.cmd == 'receiveContent') { // 不再使用了\r\n\t\tvar id = request.id;\r\n\t\tif (!id) {\r\n\t\t\tcontentMap[id] = '';\r\n\t\t}\r\n\t\tcontentMap[id] = ((contentMap[id] || '')+ (request.content || ''));\r\n\r\n\t\t$.ajax({\r\n\t\t\ttype: \"POST\",\r\n\t\t\turl: \"http://localhost:3000/receive\",\r\n\t\t\tdata: {content: request.content, id: id},\r\n\t\t\tdataType: \"json\",\r\n\t\t\tsuccess: function(data){\r\n\t\t\t\r\n\t\t\t},\r\n\t\t\terror: function(data) {\r\n\t\t\t}\r\n\t\t});\r\n\t} */\r\n\telse if (request.cmd == 'notifyIframeHtmlUsefull') { // 告知当前iframe 页面是否有内容\r\n\t\tchrome.tabs.query({}, function(tabs){\r\n\t\t\ttabs.forEach(function(tab, index) {\r\n\t\t\t\tif(tab.url.indexOf('localhost') > -1 || tab.url.indexOf('wonbao') > -1 || tab.url.indexOf('file:')>-1 || tab.url.indexOf('192.168') > -1 || tab.url.indexOf('yangkeduo.com/goods') > -1) {\r\n\t\t\t\t\tchrome.tabs.sendMessage(\r\n\t\t\t\t\t\ttabs[index].id, \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tindex: index,\r\n\t\t\t\t\t\t\tcmd: \"notifyIframeUsefull\",\r\n\t\t\t\t\t\t\thref: request.href,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t\tsendResponse();\r\n\t}\r\n\telse if(request.cmd == 'notifyIframeCopyResult') {\r\n\t\tchrome.tabs.query({}, function(tabs){\r\n\t\t\ttabs.forEach(function(tab, index) {\r\n\t\t\t\tif(tab.url.indexOf('localhost') > -1 || tab.url.indexOf('wonbao') > -1 || tab.url.indexOf('file:')>-1 || tab.url.indexOf('192.168') > -1 || tab.url.indexOf('yangkeduo.com/goods') > -1) {\r\n\t\t\t\t\tchrome.tabs.sendMessage(\r\n\t\t\t\t\t\ttabs[index].id, \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tindex: index,\r\n\t\t\t\t\t\t\tcmd: \"reveiverIframeHtml\",\r\n\t\t\t\t\t\t\tcontent: request.content,\r\n\t\t\t\t\t\t\thref: request.href,\r\n\t\t\t\t\t\t\thtml: request.html\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t\tsendResponse();\r\n\t} else if (request.cmd == 'openTab') { // 打开新tab页面\r\n\t\tvar params = request.params;\r\n\t\tchrome.tabs.create({url: params.url});\r\n\t} else if (request.cmd == 'notify') {\r\n\t\tvar params = request.params;\r\n\t\tchrome.notifications.create(null, {\r\n\t\t\ttype: params.type || 'basic',\r\n\t\t\ticonUrl: params.iconUrl || 'img/icon.png',\r\n\t\t\ttitle: params.title || '这是标题',\r\n\t\t\tmessage: params.message || ''\r\n\t\t});\r\n\t\tsendResponse();\r\n\t} else if (request.cmd == 'fetchData') { // 跨域获取数据\r\n\t\t$.ajax({\r\n\t\t\ttype: \"GET\",\r\n\t\t\turl: request.url,\r\n\t\t\ttimeout: request.timeout,\r\n\t\t\tasync: false,\r\n\t\t\tdata: {},\r\n\t\t\tdataType: \"json\",\r\n\t\t\tsuccess: function(data){\r\n\t\t\t\tvar dist = {\r\n\t\t\t\t\turl: request.url,\r\n\t\t\t\t\tres: data.responseText,\r\n\t\t\t\t\tuuid: request.uuid\r\n\t\t\t\t}\r\n\t\t\t\tsendFetchDataToContentScript(dist, \"reveiveFetchData\");\r\n\t\t\t\t/* chrome.notifications.create(null, {\r\n\t\t\t\t\ttype: params.type || 'basic',\r\n\t\t\t\t\ticonUrl: params.iconUrl || 'img/icon.png',\r\n\t\t\t\t\ttitle: params.title || '这是标题' + 'success',\r\n\t\t\t\t\tmessage: params.message || ''\r\n\t\t\t\t}); */\r\n\r\n\t\t\t\t// sendResponse((dist));\r\n\t\t\t},\r\n\t\t\terror: function(data) {\r\n\t\t\t\tvar dist = {\r\n\t\t\t\t\turl: request.url,\r\n\t\t\t\t\tres: data.responseText,\r\n\t\t\t\t\tuuid: request.uuid\r\n\t\t\t\t}\r\n\t\t\t\tsendFetchDataToContentScript(dist, \"reveiveFetchData\");\r\n\t\t\t\t/* chrome.notifications.create(null, {\r\n\t\t\t\t\ttype: params.type || 'basic',\r\n\t\t\t\t\ticonUrl: params.iconUrl || 'img/icon.png',\r\n\t\t\t\t\ttitle: params.title || '这是标题' + 'error',\r\n\t\t\t\t\tmessage: params.message || ''\r\n\t\t\t\t}); */\r\n\t\t\t\t// sendResponse(JSON.stringify(dist));\r\n\t\t\t}\r\n\t\t});\r\n\t\tsendResponse();\r\n\t} else if (request.cmd == 'notifyReceiveTaskFetchHtmlAndDesc') { // 右键点击后获取的数据\r\n\t\tchrome.tabs.query({}, function(tabs){\r\n\t\t\ttabs.forEach(function(tab, index) {\r\n\t\t\t\tif(tab.url.indexOf('localhost') > -1 || tab.url.indexOf('wonbao') > -1 || tab.url.indexOf('file:') > -1 || tab.url.indexOf('192.168') > -1) {\r\n\t\t\t\t\tchrome.tabs.sendMessage(tabs[index].id, {\r\n\t\t\t\t\t\t\tcmd: \"receiveNewQueue\",\r\n\t\t\t\t\t\t\turl: request.url,\r\n\t\t\t\t\t\t\thtml: request.html,\r\n\t\t\t\t\t\t\tdesc: request.desc,\r\n\t\t\t\t\t\t\tmsg: request.msg,\r\n\t\t\t\t\t\t}, function(response) {\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t\tsendResponse();\r\n\t} else if (request.cmd == 'httpRequest') {\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\t\txhr.open(\"GET\", request.url, true);\r\n\t\txhr.responseType = request.responseType || 'blob';//\"arraybuffer\";\r\n\t\txhr.onreadystatechange = function() {\r\n\t\t\tif (xhr.readyState == 4) {\r\n\t\t\t\tif (xhr.status == 200 || xhr.status == 304) {\r\n\t\t\t\t\tvar blob = xhr.response;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(blob) {\r\n\t\t\t\t\t\tvar file = new FileReader();\r\n\t\t\t\t\t\tfile.onload =function() {\r\n\t\t\t\t\t\t\t// callback(blob);\r\n\t\t\t\t\t\t\tvar dist = {\r\n\t\t\t\t\t\t\t\turl: request.url,\r\n\t\t\t\t\t\t\t\tres: file.result,\r\n\t\t\t\t\t\t\t\tuuid: request.uuid,\r\n\t\t\t\t\t\t\t\tsuccess: true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsendFetchDataToContentScript(dist, 'receiveHttpRequest');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfile.readAsDataURL(blob);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar dist = {\r\n\t\t\t\t\t\turl: request.url,\r\n\t\t\t\t\t\tres: '',\r\n\t\t\t\t\t\tuuid: request.uuid,\r\n\t\t\t\t\t\tsuccess: false\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsendFetchDataToContentScript(dist, 'receiveHttpRequest');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\txhr.send(null);\r\n\t\tsendResponse();\r\n\t} else if (request.cmd == 'sendDownload') { // 下载文件\r\n\t\tvar dlData = [];\r\n\t\tchrome.downloads.download(\r\n\t\t\t{\r\n\t\t\t  url: request.url,\r\n\t\t\t  filename: request.fileName,\r\n\t\t\t  conflictAction: 'overwrite',\r\n\t\t\t  saveAs: false,\r\n\t\t\t},\r\n\t\t\tfunction (id) {\r\n\t\t\t  // id 是 Chrome 新建立的下载任务的 id\r\n\t\t\t  dlData[id] = {\r\n\t\t\t\turl: request.url,\r\n\t\t\t\tid: request.id,\r\n\t\t\t\tuuid: false,\r\n\t\t\t  }\r\n\t\t\t}\r\n\t\t  )\r\n\t}\r\n});\r\n\r\n// 将跨域获取的数据传回到content-script, content-script 再传到宿主页面 \r\nfunction sendFetchDataToContentScript(data, cmd) {\r\n\tchrome.tabs.query({}, function(tabs){\r\n\t\ttabs.forEach(function(tab, index) {\r\n\t\t\tif( shouldSendToTab(tab.url) ) {\r\n\t\t\t\tchrome.tabs.sendMessage(\r\n\t\t\t\t\ttabs[index].id, \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tindex: index,\r\n\t\t\t\t\t\tcmd: cmd,\r\n\t\t\t\t\t\turl: data.url,\r\n\t\t\t\t\t\tres: data.res,\r\n\t\t\t\t\t\tuuid: data.uuid\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(response) {\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n}\r\n\r\n\r\n$('#test_cors').click(function(e) {\r\n\t/* $.get('https://www.baidu.com', function(html){\r\n\t\tconsole.log( html);\r\n\t\talert('跨域调用成功！');\r\n\t}); */\r\n\t// var url = 'https://detail.1688.com/offer/577545270423.html';\r\n\tvar url = 'https://ai.taobao.com/search/index.htm?source_id=search&key=%E5%90%95';\r\n\t$.ajax({\r\n\t\ttype: \"GET\",\r\n\t\turl: url,\r\n\t\ttimeout: 10000000,\r\n\t\tasync: false,\r\n\t\tdata: {},\r\n\t\tdataType: \"json\",\r\n\t\tsuccess: function(data){\r\n\t\t\tconsole.log('success');\r\n\t\t\tconsole.log(data);\r\n\t\t},\r\n\t\terror: function(data) {\r\n\t\t\tconsole.log('error');\r\n\t\t\tconsole.log(data);\r\n\t\t}\r\n\t});\r\n});\r\n\r\n$('#get_popup_title').click(function (e) {\r\n\tvar views = chrome.extension.getViews({type:'popup'});\r\n\tif(views.length > 0) {\r\n\t\talert(views[0].document.title);\r\n\t} else {\r\n\t\talert('popup未打开！');\r\n\t}\r\n});\r\n\r\n// 获取当前选项卡ID\r\nfunction getCurrentTabId(callback)\r\n{\r\n\tchrome.tabs.query({active: true, currentWindow: true}, function(tabs)\r\n\t{\r\n\t\tif(callback) callback(tabs.length ? tabs[0].id: null);\r\n\t});\r\n}\r\n\r\n// 当前标签打开某个链接\r\nfunction openUrlCurrentTab(url)\r\n{\r\n\tgetCurrentTabId(function(tabId) {\r\n\t\tchrome.tabs.update(tabId, {url: url});\r\n\t})\r\n}\r\n\r\n// 新标签打开某个链接\r\nfunction openUrlNewTab(url)\r\n{\r\n\tchrome.tabs.create({url: url});\r\n}\r\n\r\n// 预留一个方法给popup调用\r\nfunction testBackground() {\r\n\talert('你好，我是background！');\r\n}\r\n\r\n/* \r\n// 是否显示图片\r\nvar showImage;\r\nchrome.storage.sync.get({showImage: true}, function(items) {\r\n\tshowImage = items.showImage;\r\n});\r\n\r\n// web请求监听，最后一个参数表示阻塞式，需单独声明权限：webRequestBlocking\r\nchrome.webRequest.onBeforeRequest.addListener(function (details) {\r\n\t// cancel 表示取消本次请求\r\n\tif(!showImage && details.type == 'image') return {cancel: true};\r\n\t// 简单的音视频检测\r\n\t// 大部分网站视频的type并不是media，且视频做了防下载处理，所以这里仅仅是为了演示效果，无实际意义\r\n\tif(details.type == 'media') {\r\n\t\tchrome.notifications.create(null, {\r\n\t\t\ttype: 'basic',\r\n\t\t\ticonUrl: 'img/icon.png',\r\n\t\t\ttitle: '检测到音视频',\r\n\t\t\tmessage: '音视频地址：' + details.url,\r\n\t\t});\r\n\t}\r\n}, {urls: [\"<all_urls>\"]}, [\"blocking\"]); */\n\n\n// WEBPACK FOOTER //\n// ./src/background.js"],"sourceRoot":""}